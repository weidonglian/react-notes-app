(this["webpackJsonpreact-notes-app"]=this["webpackJsonpreact-notes-app"]||[]).push([[0],{185:function(e,a,t){e.exports=t(214)},214:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),o=t(10),c=t.n(o),i=t(55),s=t(13),u=t(12),l=t.n(u),m=t(30),d=t(145),p=t(146),f=t(147),g={apiURL:"https://wd-notes-app.herokuapp.com"}.apiURL,b=t.n(f).a.create({baseURL:g,responseType:"json"}),v={login:function(){var e=Object(m.a)(l.a.mark((function e(a){var t,n,r,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.username,n=a.password,e.next=3,b.post("/session",{username:t,password:n});case 3:return r=e.sent,o=r.data,e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),logout:function(){var e=Object(m.a)(l.a.mark((function e(){var a,t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.delete("/session");case 2:return a=e.sent,t=a.data,e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),signup:function(){var e=Object(m.a)(l.a.mark((function e(a){var t,n,r,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.username,n=a.password,e.next=3,b.post("/users/new",{username:t,password:n});case 3:return r=e.sent,o=r.data,e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),getNotes:function(){var e=Object(m.a)(l.a.mark((function e(){var a,t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.get("/notes");case 2:return a=e.sent,t=a.data,e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),addNote:function(){var e=Object(m.a)(l.a.mark((function e(a){var t,n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.name,e.next=3,b.post("/notes",{name:t});case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),addTodo:function(){var e=Object(m.a)(l.a.mark((function e(a){var t,n,r,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.noteId,n=a.name,e.next=3,b.post("/todos",{name:n,noteId:t});case 3:return r=e.sent,o=r.data,e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),updateTodo:function(){var e=Object(m.a)(l.a.mark((function e(a){var t,n,r,o,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.id,n=a.name,r=a.done,e.next=3,b.put("/todos/".concat(t),{name:n,done:r});case 3:return o=e.sent,c=o.data,e.abrupt("return",c);case 6:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),toggleTodo:function(){var e=Object(m.a)(l.a.mark((function e(a){var t,n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.id,e.next=3,b.put("/todos/".concat(t,"/toggle"));case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()},h=new(function(){function e(){Object(d.a)(this,e),this._credentials=void 0;var a=sessionStorage.getItem("credentials")||localStorage.getItem("credentials");a&&this.setCredentials(JSON.parse(a),!0)}return Object(p.a)(e,[{key:"signup",value:function(){var e=Object(m.a)(l.a.mark((function e(a){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",v.signup(a));case 1:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()},{key:"login",value:function(){var e=Object(m.a)(l.a.mark((function e(a){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.login(a);case 2:t=e.sent,n=t.token,this.setCredentials({username:a.username,access_token:n,refresh_token:n},a.remember);case 5:case"end":return e.stop()}}),e,this)})));return function(a){return e.apply(this,arguments)}}()},{key:"logout",value:function(){var e=Object(m.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.setCredentials(),!this.isAuthenticated()){e.next=4;break}return e.next=4,v.logout().catch((function(e){console.log("logout session with error:",e)}));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isAuthenticated",value:function(){return!!this._credentials}},{key:"setCredentials",value:function(e,a){(this._credentials=e||null,e)?((a?localStorage:sessionStorage).setItem("credentials",JSON.stringify(e)),b.defaults.headers.common.Authorization="Bearer ".concat(e.access_token)):(sessionStorage.removeItem("credentials"),localStorage.removeItem("credentials"),b.defaults.headers.common.Authorization=null)}},{key:"username",get:function(){return this._credentials?this._credentials.username:null}},{key:"credentials",get:function(){return this._credentials}}]),e}()),E=t(18),y=t(284),w=t(267),O=t(268),j=t(265),x=t(266),k=t(278),S=t(115),C=t.n(S),N=t(122),I=t(263),T=t(264);function D(){return r.a.createElement(N.a,{variant:"body2",color:"textSecondary",align:"center"},"Copyright \xa9 ",(new Date).getFullYear(),".")}var W=t(50),F=t(69),R=t(23),_=t(96),A="show_message",L="hide_message",q="success",M="info",z="error",Q={appMessage:{message:"",variant:q,visible:!1}};function U(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case A:return Object(_.a)(Object(_.a)({},e),{},{appMessage:{message:a.payload.message,variant:a.payload.variant,visible:!0}});case L:return Object(_.a)(Object(_.a)({},e),{},{appMessage:{message:"",variant:M,visible:!1}});default:return e}}var B=r.a.createContext([]),J=function(){return r.a.useContext(B)};function P(e){var a=e.children,t=r.a.useReducer(U,Q,void 0),n=Object(E.a)(t,2),o=n[0],c=n[1];return r.a.createElement(B.Provider,{value:[o,c]},a)}var V=W.b({username:W.c().required("Required"),password:W.c().required("Required").min(8).max(16)}),G=Object(I.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)}}})),K=function(e){var a=G(),t=e.submitForm,n=e.isSubmitting;return r.a.createElement(T.a,{component:"main",maxWidth:"xs"},r.a.createElement(j.a,null),r.a.createElement("div",{className:a.paper},r.a.createElement(y.a,{className:a.avatar},r.a.createElement(C.a,null)),r.a.createElement(N.a,{component:"h1",variant:"h5"},"Sign up"),r.a.createElement(R.b,{className:a.form},r.a.createElement(x.a,{container:!0,spacing:2},r.a.createElement(x.a,{item:!0,xs:12},r.a.createElement(R.a,{id:"username",label:"User name",name:"username",component:F.b,variant:"outlined",fullWidth:!0})),r.a.createElement(x.a,{item:!0,xs:12},r.a.createElement(R.a,{id:"password",name:"password",label:"Password",type:"password",component:F.b,variant:"outlined",fullWidth:!0}))),r.a.createElement(w.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:a.submit,onClick:t,disabled:n},"Sign Up"),r.a.createElement(x.a,{container:!0,justify:"flex-end"},r.a.createElement(x.a,{item:!0},r.a.createElement(O.a,{to:"/login",component:i.b,variant:"body2"},"Already have an account? Sign in"))))),r.a.createElement(k.a,{mt:5},r.a.createElement(D,null)))};function H(){var e=Object(s.g)(),a=J(),t=Object(E.a)(a,2)[1];return r.a.createElement(R.c,{initialValues:{username:"",password:""},onSubmit:function(a,n){h.signup(a).then((function(a){t({type:A,payload:{message:"Signup for '".concat(a.data.username,"'  succeeded"),variant:q}}),e.push("/")})).catch((function(e){n.setSubmitting(!1),e.response.data.message&&t({type:A,payload:{message:e.response.data.message,variant:z}})}))},validationSchema:V},(function(e){return r.a.createElement(K,e)}))}function Y(){return r.a.createElement(H,null)}var $=W.b({username:W.c().required(),password:W.c().required(),remember:W.a().notRequired()}),X=Object(I.a)((function(e){return{form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}})),Z=function(e){var a=X(),t=e.submitForm,n=e.isSubmitting;return r.a.createElement(R.b,{className:a.form},r.a.createElement(R.a,{type:"text",label:"User name",name:"username",component:F.b,autoComplete:"username",autoFocus:!0,variant:"outlined",margin:"normal",fullWidth:!0}),r.a.createElement(R.a,{type:"password",label:"Password",name:"password",component:F.b,variant:"outlined",margin:"normal",fullWidth:!0,autoComplete:"current-password"}),r.a.createElement(R.a,{name:"remember",Label:{label:"Remember me"},component:F.a,color:"primary"}),r.a.createElement(w.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:a.submit,onClick:t,disabled:n},"Sign In"),r.a.createElement(x.a,{container:!0},r.a.createElement(x.a,{item:!0,xs:!0},r.a.createElement(O.a,{to:"/forgot-password",component:i.b,variant:"body2"},"Forgot password?")),r.a.createElement(x.a,{item:!0},r.a.createElement(O.a,{to:"/signup",component:i.b,variant:"body2"},"Don't have an account? Sign Up"))))};function ee(){var e=Object(s.g)(),a=J(),t=Object(E.a)(a,2)[1];return r.a.createElement(R.c,{initialValues:{username:"",password:"",remember:!0},onSubmit:function(a,n){h.login(a).then((function(){t({type:A,payload:{message:"Login succeeded",variant:q}}),e.push("/")})).catch((function(e){var a,r;n.setSubmitting(!1),(null===e||void 0===e||null===(a=e.response)||void 0===a||null===(r=a.data)||void 0===r?void 0:r.message)&&t({type:A,payload:{message:e.response.data.message,variant:z}})}))},validationSchema:$},(function(e){return r.a.createElement(Z,e)}))}var ae=Object(I.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main}}}));function te(){var e=ae();return r.a.createElement(T.a,{component:"main",maxWidth:"xs"},r.a.createElement(j.a,null),r.a.createElement("div",{className:e.paper},r.a.createElement(y.a,{className:e.avatar},r.a.createElement(C.a,null)),r.a.createElement(N.a,{component:"h1",variant:"h5"},"Sign in"),r.a.createElement(ee,null)),r.a.createElement(k.a,{mt:8},r.a.createElement(D,null)))}var ne=t(165),re=t(262),oe=t(261),ce=t(280);function ie(e){var a=e.todos,t=e.toggleTodo;return r.a.createElement(k.a,{p:0},r.a.createElement(re.a,null,a.map((function(e){return r.a.createElement(oe.a,{key:e.id,control:r.a.createElement(ce.a,{checked:e.done,onChange:function(){return t(e.id)}}),label:e.name})}))))}var se=t(166),ue=t(269),le=t(116),me=t.n(le),de=Object(I.a)((function(e){return{input:{flex:1}}}));function pe(e){var a=e.addTodo,t=Object(n.useState)(""),o=Object(E.a)(t,2),c=o[0],i=o[1],s=function(){c&&(a({name:c}),i(""))},u=de();return r.a.createElement(r.a.Fragment,null,r.a.createElement(se.a,{className:u.input,onKeyDown:function(e){13===e.keyCode&&s()},value:c,onChange:function(e){var a=e.target.value;i(a)},placeholder:"Add list item here",inputProps:{"aria-label":"add list item here"},startAdornment:r.a.createElement(ue.a,{position:"start"},r.a.createElement(me.a,{color:"disabled"}))}))}var fe=t(163),ge=t(39),be=t(129),ve="notes",he=Object(I.a)((function(e){return{root:{flexGrow:1,padding:e.spacing(2)},paper:{minWidth:"120px",padding:e.spacing(2),"&:hover":{borderStyle:"solid"}},control:{padding:e.spacing(2)}}}));function Ee(){var e=he(),a=r.a.useState(-1),t=Object(E.a)(a,2),n=t[0],o=t[1],c=Object(ge.d)(ve,v.getNotes),i=function(){var e=Object(ge.e)();return Object(ge.c)(v.addTodo,{onSuccess:function(a){var t=e.getQueryData(ve),n=Object(be.a)(t,(function(e){var t=e.findIndex((function(e){return e.id===a.noteId}));t>-1&&e[t].todos.push(a)}));e.setQueryData(ve,n)}})}(),s=Object(E.a)(i,1)[0],u=function(){var e=Object(ge.e)();return Object(ge.c)(v.toggleTodo,{onSuccess:function(a){var t=e.getQueryData(ve),n=Object(be.a)(t,(function(e){var t=e.findIndex((function(e){return e.id===a.noteId}));if(t>-1){var n=e[t].todos.findIndex((function(e){return e.id===a.id}));n>-1&&(e[t].todos[n].done=a.done)}}));e.setQueryData(ve,n)}})}(),l=Object(E.a)(u,1)[0];return c.isLoading?r.a.createElement("span",null,"Loading..."):c.isError?r.a.createElement("span",null,"Error: ",c.error.message):r.a.createElement(x.a,{container:!0,spacing:2,className:e.root},c.data.map((function(a){return r.a.createElement(x.a,{key:a.id,item:!0,xs:4},r.a.createElement(ne.a,{className:e.paper,onMouseEnter:function(){return o(a.id)},onMouseLeave:function(){return o(-1)}},r.a.createElement(N.a,{variant:"h5"},a.name),r.a.createElement(ie,{todos:a.todos,toggleTodo:function(e){return l({id:e})}}),n===a.id&&r.a.createElement(pe,{addTodo:function(e){var t=e.name;return s({noteId:a.id,name:t})}})))})))}var ye=t(270),we=t(281),Oe=t(271),je=t(272),xe=t(259),ke=t(273),Se=Object(I.a)((function(e){return{fab:{margin:e.spacing(1)}}}));function Ce(){var e=Object(n.useState)(!1),a=Object(E.a)(e,2),t=a[0],o=a[1],c=Object(n.useState)(""),i=Object(E.a)(c,2),s=i[0],u=i[1],l=function(){var e=Object(ge.e)();return Object(ge.c)(v.addNote,{onSuccess:function(a){var t=e.getQueryData("notes");e.setQueryData("notes",[].concat(Object(fe.a)(t),[a]))}})}(),m=Object(E.a)(l,1)[0],d=Se(),p=function(){o(!1)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(ye.a,{color:"secondary","aria-label":"add",size:"small",className:d.fab,onClick:function(){o(!0),u("")}},r.a.createElement(me.a,null)),r.a.createElement(we.a,{open:t,onClose:p,"aria-labelledby":"form-dialog-title"},r.a.createElement(Oe.a,{id:"form-dialog-title"},"Create a new note:"),r.a.createElement(je.a,null,r.a.createElement(xe.a,{autoFocus:!0,margin:"dense",id:"name",label:"Name",type:"text",fullWidth:!0,onChange:function(e){var a=e.target.value;u(a)}})),r.a.createElement(ke.a,null,r.a.createElement(w.a,{onClick:p,color:"primary"},"Cancel"),r.a.createElement(w.a,{onClick:function(){p(),s&&m({name:s}).catch((function(e){console.log("addNote with error:",e)}))},color:"primary"},"OK"))))}function Ne(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ce,null),r.a.createElement(Ee,null))}var Ie=function(e){return r.a.createElement(r.a.Fragment,null,h.isAuthenticated()?e.children:r.a.createElement(s.a,{to:"/login"}))},Te=function(e){return r.a.createElement(r.a.Fragment,null,h.isAuthenticated()?r.a.createElement(s.a,{to:"/"}):e.children)};function De(){return r.a.createElement(s.d,null,r.a.createElement(s.b,{exact:!0,path:"/"},r.a.createElement(s.a,{to:"/notes"})),r.a.createElement(s.b,{exact:!0,path:"/signup",component:Y}),r.a.createElement(Te,{exact:!0,path:"/login"},r.a.createElement(te,null)),r.a.createElement(Ie,{exact:!0,path:"/notes"},r.a.createElement(Ne,null)))}var We=t(274),Fe=t(220),Re=t(282),_e=t(155),Ae=t.n(_e),Le=t(275),qe=t(154),Me=t.n(qe),ze=t(162),Qe=t(285),Ue=Object(I.a)((function(e){return Object(Re.a)({root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1}})}));function Be(){var e=Ue(),a=r.a.useState(null),t=Object(E.a)(a,2),n=t[0],o=t[1],c=Boolean(n),i=Object(s.g)(),u=function(){o(null)},l=function(){u(),i.push("/login")};return r.a.createElement("div",{className:e.root},r.a.createElement(We.a,{position:"static"},r.a.createElement(Le.a,null,r.a.createElement(Fe.a,{edge:"start",className:e.menuButton,color:"inherit","aria-label":"menu"},r.a.createElement(Me.a,null)),r.a.createElement(N.a,{variant:"h6",className:e.title},"Notes"),r.a.createElement(Fe.a,{"aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:function(e){o(e.currentTarget)},color:"inherit"},r.a.createElement(Ae.a,null)),r.a.createElement(ze.a,{id:"menu-appbar",anchorEl:n,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:c,onClose:u},h.isAuthenticated()?r.a.createElement(Qe.a,{onClick:function(){h.logout(),l()}},"Logout"):r.a.createElement(Qe.a,{onClick:l},"Login")))))}var Je=t(3),Pe=t(156),Ve=t.n(Pe),Ge=t(158),Ke=t.n(Ge),He=t(159),Ye=t.n(He),$e=t(160),Xe=t.n($e),Ze=t(121),ea=t(276),aa=t(283),ta=t(277),na=t(157),ra=t.n(na),oa=Object(I.a)((function(e){return{success:{backgroundColor:Ze.a[600]},error:{backgroundColor:e.palette.error.dark},info:{backgroundColor:e.palette.primary.main},warning:{backgroundColor:ea.a[700]},icon:{fontSize:20},iconVariant:{opacity:.9,marginRight:e.spacing(1)},message:{display:"flex",alignItems:"center"}}})),ca={success:Ve.a,warning:ra.a,error:Ke.a,info:Ye.a};function ia(){var e=oa(),a=J(),t=Object(E.a)(a,2),n=t[0],o=t[1],c=n.appMessage,i=c.message,s=c.variant,u=c.visible,l=ca[s],m=function(){o({type:L,payload:{}})};return r.a.createElement(aa.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:u,autoHideDuration:5e3,onClose:m},r.a.createElement(ta.a,{className:e[s],"aria-describedby":"client-snackbar",message:r.a.createElement("span",{id:"client-snackbar",className:e.message},r.a.createElement(l,{className:Object(Je.a)(e.icon,e.iconVariant)}),i),action:[r.a.createElement(Fe.a,{key:"close","aria-label":"close",color:"inherit",onClick:m},r.a.createElement(Xe.a,{className:e.icon}))]}))}var sa=t(161),ua=new ge.a;function la(){return r.a.createElement(i.a,null,r.a.createElement(ge.b,{queryCache:ua},r.a.createElement(P,null,r.a.createElement(Be,null),r.a.createElement(ia,null),r.a.createElement(De,null)),r.a.createElement(sa.ReactQueryDevtools,{initialIsOpen:!0})))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(la,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[185,1,2]]]);
//# sourceMappingURL=main.05614478.chunk.js.map